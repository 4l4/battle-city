webpackJsonp([0],{149:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const l=a(10),r=a(5),W=a(338),n=a(33);t.default=function*(e,t){for(;;){const{delta:a}=yield l.take("TICK"),d=yield*t(a),i=yield l.select(n.playerTank,e),{game:{AIFrozenTimeout:o}}=yield l.select();if(null==i||0<i.frozenTimeout||"ai"===i.side&&0<o)continue;let s=0>=i.frozenTimeout?0:i.frozenTimeout-a;if(null==d)i.moving&&(yield l.put({type:"STOP_MOVE",tankId:i.tankId}));else if("turn"===d.type){const{direction:e}=d,t=i.set("direction",e),{xy:a}=r.getDirectionInfo(e,!0),o=i.get(a)/8,n=t.set(a,8*Math.floor(o)),s=t.set(a,8*Math.ceil(o)),p=yield l.select(W.default,n),u=yield l.select(W.default,s);let b;b=p?u?t.set(a,8*Math.round(o)):n:s,yield l.put({type:"MOVE",tank:b})}else if("forward"===d.type){const e=r.getTankMoveSpeed(i),t=Math.min(a*e,d.maxDistance||Infinity),{xy:n,updater:o}=r.getDirectionInfo(i.direction),s=i.update(n,o(t));(yield l.select(W.default,s))&&(yield l.put({type:"MOVE",tank:s}),!i.moving&&(yield l.put({type:"START_MOVE",tankId:i.tankId})))}else throw new Error(`Invalid input: ${d}`);i.frozenTimeout!==s&&(yield l.put({type:"SET_FROZEN_TIMEOUT",tankId:i.tankId,frozenTimeout:s}))}}},150:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=a(10),l=a(5),r=a(33),W=a(9);t.default=function*(e,t){for(;;){const{delta:a}=yield n.take("TICK"),{bullets:d}=yield n.select(),i=yield n.select(r.playerTank,e),{game:{AIFrozenTimeout:o}}=yield n.select();if(null==i||"ai"===i.side&&0<o)continue;let s=0>=i.cooldown?0:i.cooldown-a;if(0>=i.cooldown&&t()){const e=d.filter((e)=>e.tankId===i.tankId);if(e.count()<l.getTankBulletLimit(i)){const{x:e,y:t}=l.calculateBulletStartPosition(i);yield n.put({type:"ADD_BULLET",bullet:W.BulletRecord({bulletId:l.getNextId("bullet"),direction:i.direction,x:e,y:t,power:l.getTankBulletPower(i),speed:l.getTankBulletSpeed(i),tankId:i.tankId})}),s=l.getTankBulletInterval(i)}}i.cooldown!==s&&(yield n.put({type:"SET_COOLDOWN",tankId:i.tankId,cooldown:s}))}}},156:function(e,t,a){a(157),e.exports=a(160)},157:function(e,t,a){e.exports=a(158)},158:function(e,t,a){"use strict";e.exports=a(159)},159:function(){"use strict"},160:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),a(51);const n=a(0),l=a(52),r=a(251),W=a(11),d=a(281),i=a(352);(function(e){l.render(n.createElement(r.AppContainer,null,n.createElement(W.Provider,{store:d.default},n.createElement(e,null))),document.getElementById("container"))})(i.default),!1},20:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(340);t.spawnTank=n.default;var l=a(341);t.destroyBullets=l.default;var r=a(342);t.destroyTanks=r.default;var W=a(343);t.timing=W.default,t.nonPauseDelay=W.nonPauseDelay,t.tween=W.tween},251:function(e,t,a){e.exports=a(252)},252:function(e,t,a){"use strict";e.exports=a(253)},253:function(e,t,a){"use strict";e.exports.AppContainer=a(254)},254:function(e,t,a){"use strict";e.exports=a(255)},255:function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&("object"==typeof t||"function"==typeof t)?t:e}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var W=function(){function e(e,t){for(var a,n=0;n<t.length;n++)a=t[n],a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),d=a(0),i=d.Component,o=function(e){function t(){return n(this,t),l(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return r(t,e),W(t,[{key:"render",value:function(){return this.props.component?d.createElement(this.props.component,this.props.props):d.Children.only(this.props.children)}}]),t}(i);e.exports=o},281:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=a(40),l=a(30),r=a(50),W=a(336),d=l.default();t.default=n.createStore(r.default,n.applyMiddleware(d)),d.run(W.default)},33:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=a(17),l=a(2),r=a(5);t.playerTank=(e,t)=>{const{active:a,activeTankId:n}=e.players.get(t);return a?e.tanks.get(n,null):null},t.availableSpawnPosition=({tanks:e})=>{const t=[],a=e.filter((e)=>e.active);outer:for(const e of[0,6*l.BLOCK_SIZE,12*l.BLOCK_SIZE]){const n={x:e,y:0,width:l.TANK_SIZE,height:l.TANK_SIZE};for(const e of a.values())if(r.testCollide(n,{x:e.x,y:e.y,width:l.TANK_SIZE,height:l.TANK_SIZE}))continue outer;t.push(n)}return n.sample(t)},t.validPowerUpSpawnPositions=({map:{bricks:e,rivers:t,steels:a,eagle:n}})=>{const W=[];for(let d=0;d<(l.FIELD_BLOCK_SIZE-1)*l.BLOCK_SIZE;d+=0.5*l.BLOCK_SIZE)for(let i,o=0;o<(l.FIELD_BLOCK_SIZE-1)*l.BLOCK_SIZE;o+=0.5*l.BLOCK_SIZE){i=0;partLoop:for(const W of[{x:o+4,y:d+4,width:4,height:4},{x:o+8,y:d+4,width:4,height:4},{x:o+4,y:d+8,width:4,height:4},{x:o+8,y:d+8,width:4,height:4}]){for(const[t,a]of r.iterRowsAndCols(l.ITEM_SIZE_MAP.BRICK,W))if(e.get(t*l.N_MAP.BRICK+a)){i++;continue partLoop}for(const[e,t]of r.iterRowsAndCols(l.ITEM_SIZE_MAP.STEEL,W))if(a.get(e*l.N_MAP.STEEL+t)){i++;continue partLoop}for(const[e,a]of r.iterRowsAndCols(l.ITEM_SIZE_MAP.RIVER,W))if(t.get(e*l.N_MAP.RIVER+a)){i++;continue partLoop}if(r.testCollide(r.asBox(n),W)){i++;continue partLoop}}(1==i||2==i||3==i)&&W.push({x:o,y:d})}return W}},336:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=a(10),l=a(337),r=a(339),W=a(344),d=a(348),i=a(76),o=a(350),s=a(351),p=a(2);t.default=function*(){console.debug("root saga started"),yield n.fork(i.default),yield n.fork(r.default),yield n.fork(s.default),yield n.fork(l.default,"player-1",p.CONTROL_CONFIG.player1),yield n.fork(l.default,"player-2",p.CONTROL_CONFIG.player2),yield n.fork(d.default),yield n.fork(o.default,"player-1","yellow"),yield n.fork(W.default)}},337:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=a(10),l=a(33),r=a(17),W=a(149),d=a(150),i=a(151);t.default=function*(e,t){function a(){for(let e of navigator.getGamepads())if(e&&"Xbox 360 Controller (XInput STANDARD GAMEPAD)"===e.id)return e.index;return-1}function o(){if(-1!==a()){const e=navigator.getGamepads()[a()];if(e){if(0.5<e.axes[0])return{direction:"right"};return-0.5>e.axes[0]?{direction:"left"}:0.5<e.axes[1]?{direction:"down"}:-0.5>e.axes[1]?{direction:"up"}:{direction:null}}}else return 0<E.length?{direction:r.last(E)}:{direction:null}}function s(){if(-1!==a()){const e=navigator.getGamepads()[a()];return e&&e.buttons[6].pressed}return b||P}function p(e,t){i.bind(e,()=>{-1===E.indexOf(t)&&E.push(t)},"keydown"),i.bind(e,()=>{r.pull(E,t)},"keyup")}function*u(){const t=yield n.select(l.playerTank,e);if(null!=t){const{direction:e}=o();if(null!=e)return e===t.direction?{type:"forward"}:{type:"turn",direction:e}}return null}let b=!1,P=!1;i.bind(t.fire,()=>{b=!0,P=!0},"keydown"),i.bind(t.fire,()=>b=!1,"keyup"),yield n.fork(function*(){for(;;)yield n.take("TICK"),P=!1});const E=[];for(p(t.up,"up"),p(t.left,"left"),p(t.down,"down"),p(t.right,"right");;){const t=yield n.take("ACTIVATE_PLAYER");t.playerName===e&&(yield n.all([W.default(e,u),d.default(e,s)]))}}},338:function(e,t,a){"use strict";function n(e,t,a){const n={x:e.x,y:e.y,width:o.BLOCK_SIZE,height:o.BLOCK_SIZE};return i.testCollide(n,t,a)}function l(e,t,a){const n=o.ITEM_SIZE_MAP.BRICK;for(const[l,r]of i.iterRowsAndCols(n,t)){const W=l*o.N_MAP.BRICK+r;if(e.get(W)){if(i.testCollide({x:r*n,y:l*n,width:n,height:n},t,a))return!0}}return!1}function r(e,t,a){const n=o.ITEM_SIZE_MAP.STEEL;for(const[l,r]of i.iterRowsAndCols(n,t)){const W=l*o.N_MAP.STEEL+r;if(e.get(W)){if(i.testCollide({x:r*n,y:l*n,width:n,height:n},t,a))return!0}}return!1}function W(e,t,a){const n=o.ITEM_SIZE_MAP.RIVER;for(const[l,r]of i.iterRowsAndCols(n,t)){const W=l*o.N_MAP.RIVER+r;if(e.get(W)){if(i.testCollide({x:r*n,y:l*n,width:n,height:n},t,a))return!0}}return!1}function d(e,t,a,n){for(const l of e.values()){if(t.tankId===l.tankId)continue;const e=i.asBox(l);if(i.testCollide(e,a,n))return!0}return!1}Object.defineProperty(t,"__esModule",{value:!0});const i=a(5),o=a(2);t.default=function({tanks:e,map:{bricks:t,steels:a,rivers:o,eagle:s}},p,u=-0.01){const b=i.asBox(p);if(!i.isInField(b))return!1;if(n(s,b,u))return!1;if(l(t,b,u))return!1;if(r(a,b,u))return!1;if(W(o,b,u))return!1;const P=e.filter((e)=>e.active);return!d(P,p,b,u)}},339:function(e,t,a){"use strict";function*n(){for(;;){const{delta:e}=yield E.take("TICK"),{bullets:t}=yield E.select();if(t.isEmpty())continue;const a=t.map((t)=>{const{direction:a,speed:n}=t,{xy:l,updater:r}=f.getDirectionInfo(a);return t.update(l,r(n*e))});yield E.put({type:"UPDATE_BULLETS",updatedBullets:a})}}function*l(e){const{bullets:t,map:{bricks:a}}=yield E.select();t.forEach((n)=>{for(const[l,r]of f.iterRowsAndCols(c.ITEM_SIZE_MAP.BRICK,f.asBox(n))){const W=l*c.N_MAP.BRICK+r;if(a.get(W))return void e.expBulletIdSet.add(n.bulletId)}})}function*r(e){const{bullets:t,map:{steels:a}}=yield E.select();t.forEach((n)=>{for(const[l,r]of f.iterRowsAndCols(c.ITEM_SIZE_MAP.STEEL,f.asBox(n))){const W=l*c.N_MAP.STEEL+r;if(a.get(W))return void e.expBulletIdSet.add(n.bulletId)}})}function W(e){const t=f.asBox(e);return"up"===e.direction||"down"===e.direction?(t.x-=y,t.width+=2*y):(t.y-=y,t.height+=2*y),t}function*d(e){const{map:{steels:a}}=yield E.select(),n=[];e.forEach((e)=>{if(e.power>=c.STEEL_POWER)for(const[l,r]of f.iterRowsAndCols(c.ITEM_SIZE_MAP.STEEL,W(e))){const e=l*c.N_MAP.STEEL+r;a.get(e)&&n.push(e)}}),0<n.length&&(yield E.put({type:"REMOVE_STEELS",ts:P.Set(n)}))}function*i(e){const{map:{bricks:a}}=yield E.select(),n=[];e.forEach((e)=>{for(const[l,r]of f.iterRowsAndCols(c.ITEM_SIZE_MAP.BRICK,W(e))){const e=l*c.N_MAP.BRICK+r;a.get(e)&&n.push(e)}}),0<n.length&&(yield E.put({type:"REMOVE_BRICKS",ts:P.Set(n)}))}function*o(e){const{map:{eagle:t}}=yield E.select();if(null==t)return e.clear();const{broken:a,x:n,y:l}=t;if(a)return P.Map();const r={x:n,y:l,width:c.BLOCK_SIZE,height:c.BLOCK_SIZE};return e.filter((e)=>f.testCollide(r,f.asBox(e)))}function*s(e){const{bullets:t,tanks:a}=yield E.select(),n=a.filter((e)=>e.active);for(const l of t.values())for(const t of n.values()){if(t.tankId===l.tankId)continue;const n={x:t.x,y:t.y,width:c.BLOCK_SIZE,height:c.BLOCK_SIZE};if(f.testCollide(n,f.asBox(l),-0.02)){const n=a.find((e)=>e.tankId===l.tankId).side,r=t.side;if("human"===n&&"human"===r)e.expBulletIdSet.add(l.bulletId),e.frozenTankIdSet.add(t.tankId);else if("human"===n&&"ai"===r){const a=f.getOrDefault(e.tankHurtMap,t.tankId,()=>new Map),n=a.get(t.tankId)||0;a.set(l.tankId,n+1),e.expBulletIdSet.add(l.bulletId)}else if("ai"===n&&"human"===r){if(0<t.helmetDuration)e.noExpBulletIdSet.add(l.bulletId);else{const a=f.getOrDefault(e.tankHurtMap,t.tankId,()=>new Map),n=a.get(t.tankId)||0;a.set(l.tankId,n+1),e.expBulletIdSet.add(l.bulletId)}}else if("ai"===n&&"ai"===r);else throw new Error("Error side status")}}}function*p(e){const{bullets:t}=yield E.select();for(const a of t.values()){const n=f.asBox(a);for(const l of t.values()){if(a.bulletId===l.bulletId)continue;const t=f.asBox(l);f.testCollide(n,t)&&e.noExpBulletIdSet.add(a.bulletId)}}}function u({tanks:e,players:t},a){const n=[],l=[];for(const[r,W]of a.tankHurtMap.entries()){const a=f.sum(W.values()),d=e.get(r);if(a>=d.hp){const a=W.keys().next().value;n.push({type:"KILL",targetTank:d,sourceTank:e.get(a),targetPlayer:t.find((e)=>e.activeTankId===r),sourcePlayer:t.find((e)=>e.activeTankId===a)})}else l.push({type:"HURT",targetTank:d,hurt:a})}return{kills:n,hurts:l}}function*b(){for(;;){yield E.take("AFTER_TICK");const e=yield E.select(),{bullets:t,players:a,tanks:n}=e,W=n.filter((e)=>e.active),b=yield*o(t);b.isEmpty()||(yield E.fork(w.destroyBullets,b,!0),yield E.put({type:"DESTROY_EAGLE"}));const c={expBulletIdSet:new Set,noExpBulletIdSet:new Set,tankHurtMap:new Map,frozenTankIdSet:new Set};yield*s(c),yield*p(c),yield*l(c),yield*r(c);const y=t.filter((e)=>c.expBulletIdSet.has(e.bulletId));y.isEmpty()||(yield E.fork(w.destroyBullets,y,!0),yield*i(y),yield*d(y));for(const e of c.frozenTankIdSet)yield E.put({type:"SET_FROZEN_TIMEOUT",tankId:e,frozenTimeout:500});const{kills:m,hurts:g}=u(e,c);yield*g.map((e)=>E.put(e)),yield E.fork(w.destroyTanks,P.Map(m.map((e)=>[e.targetTank.tankId,e.targetTank]))),yield*m.map((e)=>E.put(e));const h=t.filter((e)=>c.noExpBulletIdSet.has(e.bulletId));yield E.fork(w.destroyBullets,h,!1);const I=t.filterNot((e)=>f.isInField(f.asBox(e)));yield E.fork(w.destroyBullets,I,!0)}}Object.defineProperty(t,"__esModule",{value:!0});const P=a(6),E=a(10),c=a(2),w=a(20),f=a(5),y=4;t.default=function*(){yield E.fork(n),yield E.fork(b)}},340:function(e,t,a){"use strict";function n(e,a){return e.map(({t:e,v:t})=>({t:e/a,v:t}))}Object.defineProperty(t,"__esModule",{value:!0});const l=a(10),r=a(9),W=a(5),d=a(20);t.default=function*(e,t=1){const a=[{v:3,t:W.frame(3)},{v:2,t:W.frame(3)},{v:1,t:W.frame(3)},{v:0,t:W.frame(3)},{v:1,t:W.frame(3)},{v:2,t:W.frame(3)},{v:3,t:W.frame(3)},{v:2,t:W.frame(3)},{v:1,t:W.frame(3)},{v:0,t:W.frame(3)},{v:1,t:W.frame(3)},{v:2,t:W.frame(3)},{v:3,t:W.frame(1)}],i=W.getNextId("flicker");yield*d.timing(n(a,t),function*(t){yield l.put({type:"ADD_OR_UPDATE_FLICKER",flicker:r.FlickerRecord({flickerId:i,x:e.x,y:e.y,shape:t})})}),yield l.put({type:"REMOVE_FLICKER",flickerId:i});const o=W.getNextId("tank");return yield l.put({type:"ADD_TANK",tank:e.set("tankId",o)}),o}},341:function(e,t,a){"use strict";function*n(e){const t=[["s0",i.frame(4)],["s1",i.frame(3)],["s2",i.frame(2)]],a=i.getNextId("explosion");for(const[n,l]of t)yield W.put({type:"ADD_OR_UPDATE_EXPLOSION",explosion:d.ExplosionRecord({cx:e.x+2,cy:e.y+2,shape:n,explosionId:a})}),yield r.delay(l);yield W.put({type:"REMOVE_EXPLOSION",explosionId:a})}function*l(e,t){yield W.put({type:"REMOVE_BULLET",bulletId:e.bulletId}),t&&(yield*n(e))}Object.defineProperty(t,"__esModule",{value:!0});const r=a(30),W=a(10),d=a(9),i=a(5);t.default=function*(e,t){e.isEmpty()||(yield W.all(e.toArray().map((e)=>l(e,t))))}},342:function(e,t,a){"use strict";function*n(e){const t=i.getNextId("score");yield W.put({type:"ADD_SCORE",score:d.ScoreRecord({score:o.TANK_KILL_SCORE_MAP[e.level],scoreId:t,x:e.x,y:e.y})}),yield s.nonPauseDelay(i.frame(48)),yield W.put({type:"REMOVE_SCORE",scoreId:t})}function*l(e){const t=[{v:"s0",t:i.frame(7)},{v:"s1",t:i.frame(5)},{v:"s2",t:i.frame(7)},{v:"b0",t:i.frame(5)},{v:"b1",t:i.frame(7)},{v:"s2",t:i.frame(5)}],a=i.getNextId("explosion");yield*s.timing(t,function*(t){yield W.put({type:"ADD_OR_UPDATE_EXPLOSION",explosion:d.ExplosionRecord({cx:e.x+8,cy:e.y+8,shape:t,explosionId:a})})}),yield W.put({type:"REMOVE_EXPLOSION",explosionId:a})}function*r(e){yield W.put({type:"REMOVE_TANK",tankId:e.tankId}),yield*l(e),"ai"===e.side&&(yield*n(e))}Object.defineProperty(t,"__esModule",{value:!0});const W=a(10),d=a(9),i=a(5),o=a(2),s=a(20);t.default=function*(e){yield W.all(e.toArray().map(r))}},343:function(e,t,a){"use strict";function*n(e,a){let t=0,n=0;for(const{t:l,v:W}of e)for(yield*a(W),n+=l;;){const{delta:e}=yield r.take("TICK");if(t+=e,t>=n)break}}Object.defineProperty(t,"__esModule",{value:!0});const l=a(17),r=a(10);t.default=n,t.nonPauseDelay=function(e){return r.call(n,[{v:null,t:e}],()=>[])},t.tween=function*(e,t){for(let a=0;a<e;){const{delta:n}=yield r.take("TICK");a+=n,yield t(l.clamp(a/e,0,1))}}},344:function(e,t,a){"use strict";function*n(e,{direction:t,distance:a,duration:n}){for(let l=0;;){const{delta:W}=yield r.take("TICK"),d=W*(a/n),i=d+l<a?d:a-l;if(yield r.put({type:"UPDATE_TEXT_POSITION",textIds:e,direction:t,distance:i}),l+=i,l>=a)return}}function*l(){const e=d.getNextId("text"),t=d.getNextId("text");yield r.put({type:"SET_TEXT",textId:e,content:"game",fill:"red",x:6.5*W.BLOCK_SIZE,y:13*W.BLOCK_SIZE}),yield r.put({type:"SET_TEXT",textId:t,content:"over",fill:"red",x:6.5*W.BLOCK_SIZE,y:13.5*W.BLOCK_SIZE}),yield*n([e,t],{direction:"up",distance:6*W.BLOCK_SIZE,duration:2e3}),yield o.nonPauseDelay(500),yield r.put({type:"REMOVE_TEXT",textId:e}),yield r.put({type:"REMOVE_TEXT",textId:t}),yield r.put({type:"LOAD_SCENE",scene:"gameover"})}Object.defineProperty(t,"__esModule",{value:!0});const r=a(10),W=a(2),d=a(5),i=a(345),o=a(20),s=a(41);t.default=function*(){yield r.take((e)=>"GAMESTART"===e.type);const e=Object.keys(s.default);for(const t of e){const e=yield*i.default(t);if(!1,"clear"===e.status);else{console.log(`gameover, reason: ${e.reason}`),yield*l();break}}}},345:function(e,t,a){"use strict";function*n(e){yield W.put({type:"UPDATE_CURTAIN",curtainName:"stage-enter-cutain",t:0}),yield*s.tween(i.frame(30),(e)=>W.put({type:"UPDATE_CURTAIN",curtainName:"stage-enter-cutain",t:e})),yield s.nonPauseDelay(i.frame(20)),yield W.put({type:"LOAD_STAGE_MAP",name:e}),yield s.nonPauseDelay(i.frame(20)),yield*s.tween(i.frame(30),(e)=>W.put({type:"UPDATE_CURTAIN",curtainName:"stage-enter-cutain",t:1-e})),yield W.put({type:"START_STAGE",name:e}),yield W.put({type:"SHOW_HUD"})}function*l({targetTank:e}){if(e.withPowerUp){const e=r.sample(["tank","star","grenade","timer","helmet","shovel"]),t=r.sample((yield W.select(d.validPowerUpSpawnPositions)));yield*p.default(o.PowerUpRecord({powerUpId:i.getNextId("power-up"),powerUpName:e,visible:!0,x:t.x,y:t.y}))}}Object.defineProperty(t,"__esModule",{value:!0});const r=a(17),W=a(10),d=a(33),i=a(5),o=a(9),s=a(20),p=a(346),u=a(347);t.default=function*(e){for(yield W.put({type:"LOAD_SCENE",scene:"game"}),yield*n(e);;){const e=yield W.take(["KILL","DESTROY_EAGLE"]);if("KILL"===e.type){const{sourcePlayer:t,targetTank:a}=e,{players:n,game:{remainingEnemies:d},tanks:r}=yield W.select();if("human"===t.side){yield W.put({type:"INC_KILL_COUNT",playerName:t.playerName,level:a.level}),yield W.fork(l,e);const n=r.filter((e)=>e.active&&"ai"===e.side);if(d.isEmpty()&&n.isEmpty()){yield s.nonPauseDelay(1500);const{powerUps:e}=yield W.select();return e.isEmpty()||(yield s.nonPauseDelay(5e3)),yield*u.default(),yield W.put({type:"HIDE_HUD"}),yield W.put({type:"END_STAGE"}),yield W.put({type:"CLEAR_TANKS"}),{status:"clear"}}}else if(!n.some((e)=>"human"===e.side&&0<e.lives))return yield s.nonPauseDelay(1500),yield*u.default(),yield W.put({type:"HIDE_HUD"}),yield W.put({type:"END_STAGE"}),yield W.put({type:"CLEAR_TANKS"}),{status:"fail",reason:"all-human-dead"}}else if("DESTROY_EAGLE"===e.type)return{status:"fail",reason:"DESTROY_EAGLE"}}}},346:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=a(10),l=a(5),r=a(20);t.default=function*(e){const t=(t)=>"PICK_POWER_UP"===t.type&&t.powerUp.powerUpId===e.powerUpId;try{yield n.put({type:"ADD_POWER_UP",powerUp:e});let a=!0;for(let W=0;50>W;W++){const W=yield n.race({timeout:r.nonPauseDelay(l.frame(8)),picked:n.take(t),stageChanged:n.take("START_STAGE")});if(W.picked||W.stageChanged)break;a=!a,yield n.put({type:"UPDATE_POWER_UP",powerUp:e.set("visible",a)})}}finally{yield n.put({type:"REMOVE_POWER_UP",powerUpId:e.powerUpId})}}},347:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=a(6),l=a(10),r=a(2),W=a(20);t.default=function*(){yield l.put({type:"LOAD_SCENE",scene:"statistics"});const{game:{killInfo:e}}=yield l.select(),t=e.get("player-1",n.Map());yield W.nonPauseDelay(500);for(const e of r.TANK_LEVELS){const{game:{transientKillInfo:a}}=yield l.select();yield W.nonPauseDelay(250);const n=t.get(e,0);if(0===n)yield l.put({type:"UPDATE_TRANSIENT_KILL_INFO",info:a.setIn(["player-1",e],0)});else for(let t=1;t<=n;t+=1)yield l.put({type:"UPDATE_TRANSIENT_KILL_INFO",info:a.setIn(["player-1",e],t)}),yield W.nonPauseDelay(160);yield W.nonPauseDelay(200)}yield W.nonPauseDelay(200),yield l.put({type:"SHOW_TOTAL_KILL_COUNT"}),yield W.nonPauseDelay(1e3)}},348:function(e,t,a){"use strict";function*n(e,t,a){function*n(){const t=yield d.select(b.playerTank,e);if(null==t)return null;if(W&&t.direction!==W){const e=W;return W=null,p=0,{type:"turn",direction:e}}if(0<p){const{xy:e}=i.getDirectionInfo(t.direction),n=Math.abs(t.get(e)-l),r=p-n;return n===p?(p=0,a.put({type:"reach"}),null):{type:"forward",maxDistance:r}}return null}let l,r=!1,W=null,p=0;for(yield d.fork(o.default,e,n),yield d.fork(s.default,e,()=>{return!!r&&(r=!1,!0)});;){const n=yield d.take(t);if("forward"===n.type){const t=yield d.select(b.playerTank,e);if(null==t)continue;const{xy:a}=i.getDirectionInfo(t.direction);l=t.get(a),p=n.forwardLength}else if("fire"===n.type)r=!0;else if("turn"===n.type)W=n.direction;else if(!("query"===n.type))throw new Error;else if("my-tank-info"===n.query){const t=yield d.select(b.playerTank,e);if(null==t)continue;a.put({type:"query-result",result:{type:"my-tank-info",tank:t&&t.toObject()}})}else if("map-info"===n.query){const{map:e}=yield d.select();a.put({type:"query-result",result:{type:"map-info",map:e.toJS()}})}else if("active-tanks-info"===n.query){const{tanks:e}=yield d.select();a.put({type:"query-result",result:{type:"active-tanks-info",tanks:e.filter((e)=>e.active).map((e)=>e.toObject()).toArray()}})}else if("my-fire-info"===n.query){const t=yield d.select(b.playerTank,e);if(null==t)continue;const{bullets:n}=yield d.select(),l=n.filter((e)=>e.tankId===t.tankId).count(),r=l<u.getTankBulletLimit(t)&&0>=t.cooldown;a.put({type:"query-result",result:{type:"my-fire-info",bulletCount:l,canFire:r,cooldown:t.cooldown}})}}}function*l(e,t){yield d.fork(function*(){for(;;){const a=yield d.take(t);e.postMessage(a)}})}function*r(e,t){const a=new t;try{const t=W.channel(),r=W.eventChannel((e)=>{const t=(t)=>e(t.data);return a.addEventListener("message",t),()=>a.removeEventListener("message",t)});yield d.all([n(e,r,t),l(a,t)])}finally{a.terminate()}}Object.defineProperty(t,"__esModule",{value:!0});const W=a(30),d=a(10),i=a(5),o=a(149),s=a(150),p=a(20),u=a(5),b=a(33),P=a(9),E=a(349);t.default=function*(){function*e(){for(;;){yield d.take(a);const{game:{remainingEnemies:e,currentStage:n}}=yield d.select();if(!e.isEmpty()){const a=`AI-${u.getNextId("AI-player")}`;yield d.put({type:"CREATE_PLAYER",player:P.PlayerRecord({playerName:a,lives:Infinity,side:"ai"})});const{x:l,y:W}=yield d.select(b.availableSpawnPosition);yield d.put({type:"REMOVE_FIRST_REMAINING_ENEMY"});const i=e.first(),o="armor"===i?4:1,s=yield*p.spawnTank(P.TankRecord({x:l,y:W,side:"ai",level:i,hp:o,withPowerUp:Math.random()<u.getWithPowerUpProbability(n)}),0.6);t[a]=yield d.spawn(r,a,E),yield d.put({type:"ACTIVATE_PLAYER",playerName:a,tankId:s})}}}const t={},a=W.channel();for(yield d.fork(e);;){const e=yield d.take(["KILL","START_STAGE","GAMEOVER"]);if("START_STAGE"===e.type)for(let e=0;e<2;e++)a.put("add");else if("KILL"===e.type&&"ai"===e.targetTank.side){const{targetPlayer:{playerName:n}}=e,l=t[n];l.cancel(),delete t[e.targetPlayer.playerName],yield d.put({type:"REMOVE_PLAYER",playerName:n}),a.put("add")}else if("GAMEOVER"===e.type)for(const[e,a]of Object.entries(t))a.cancel(),delete t[e],yield d.put({type:"REMOVE_PLAYER",playerName:e})}}},349:function(e,t,a){e.exports=function(){return new Worker(a.p+"45be0eadbba1d87a2a7c.worker.js")}},350:function(e,t,a){"use strict";function*n(e){const t=yield d.select(u.playerTank,e);if(null!=t){const{powerUps:a,players:n}=yield d.select(),l=a.find((e)=>o.testCollide(o.asBox(e,-0.5),o.asBox(t)));l&&(yield d.put({type:"PICK_POWER_UP",tank:t,powerUp:l,player:n.get(e)}))}}function*l(e,t){const{players:a}=yield d.select(),n=a.get(e);if(n.reservedTank||0<n.lives){n.reservedTank||(yield d.put({type:"DECREMENT_PLAYER_LIFE",playerName:e})),yield d.put({type:"SET_REVERSED_TANK",playerName:e,reversedTank:null});const a=n.reservedTank||s.TankRecord({side:"human",color:t,level:"basic"}),l=yield*p.spawnTank(a.merge({active:!0,x:4*i.BLOCK_SIZE,y:12*i.BLOCK_SIZE,direction:"up",helmetDuration:o.frame(135)}));yield d.put({type:"ACTIVATE_PLAYER",playerName:e,tankId:l})}}function*r(e){const t=yield d.select(u.playerTank,e);t&&(yield d.put({type:"SET_REVERSED_TANK",playerName:e,reversedTank:t}))}function*W(e,t){const{players:a}=yield d.select(),n=a.get(e);if(0<n.lives){yield d.put({type:"DECREMENT_PLAYER_LIFE",playerName:e});const a=yield*p.spawnTank(s.TankRecord({x:4*i.BLOCK_SIZE,y:12*i.BLOCK_SIZE,side:"human",color:t,level:"basic",helmetDuration:o.frame(180)}));yield d.put({type:"ACTIVATE_PLAYER",playerName:e,tankId:a})}}Object.defineProperty(t,"__esModule",{value:!0});const d=a(10),i=a(2),o=a(5),s=a(9),p=a(20),u=a(33);t.default=function*(e,t){yield d.put({type:"CREATE_PLAYER",player:s.PlayerRecord({playerName:e,lives:3,side:"human"})}),yield d.takeEvery("AFTER_TICK",n,e),yield d.takeEvery("START_STAGE",l,e,t),yield d.takeEvery("END_STAGE",r,e),yield d.takeEvery(function(t){return"KILL"===t.type&&t.targetPlayer.playerName===e},W,e,t)}},351:function(e,t,a){"use strict";function n(e){const{eagle:t,steels:a,bricks:n}=e,l={x:t.x-8,y:t.y-8,width:31,height:31},r=new Set(Array.from(w.iterRowsAndCols(c.ITEM_SIZE_MAP.BRICK,l)).map(([e,t])=>e*c.N_MAP.BRICK+t)),W=new Set(Array.from(w.iterRowsAndCols(c.ITEM_SIZE_MAP.BRICK,w.asBox(t,-0.1))).map(([e,t])=>e*c.N_MAP.BRICK+t)),d=new Set(Array.from(w.iterRowsAndCols(c.ITEM_SIZE_MAP.BRICK,l)).map(([e,t])=>{const a=b(e/2),n=b(t/2);return a*c.N_MAP.STEEL+n})),i=a.map((e,a)=>!d.has(a)&&e),o=n.map((e,a)=>r.has(a)&&!W.has(a)||e);return e.set("steels",i).set("bricks",o)}function l(e){const{eagle:t,steels:a,bricks:n}=e,l={x:t.x-8,y:t.y-8,width:31,height:31},r=new Set(Array.from(w.iterRowsAndCols(c.ITEM_SIZE_MAP.STEEL,l)).map(([e,t])=>e*c.N_MAP.STEEL+t)),W=new Set(Array.from(w.iterRowsAndCols(c.ITEM_SIZE_MAP.STEEL,w.asBox(t,-0.1))).map(([e,t])=>e*c.N_MAP.STEEL+t)),d=a.map((e,a)=>r.has(a)&&!W.has(a)||e),i=new Set(Array.from(w.iterRowsAndCols(c.ITEM_SIZE_MAP.BRICK,l)).map(([e,t])=>e*c.N_MAP.BRICK+t)),o=n.map((e,a)=>!i.has(a)&&e);return e.set("steels",d).set("bricks",o)}function*r(){yield P.put({type:"UPDATE_MAP",map:l((yield P.select()).map)}),yield f.nonPauseDelay(w.frame(1076));for(let e=0;6>e;e++)yield P.put({type:"UPDATE_MAP",map:n((yield P.select()).map)}),yield f.nonPauseDelay(w.frame(16)),yield P.put({type:"UPDATE_MAP",map:l((yield P.select()).map)}),yield f.nonPauseDelay(w.frame(16));yield P.put({type:"UPDATE_MAP",map:n((yield P.select()).map)})}function*W(){for(yield P.put({type:"SET_AI_FROZEN_TIMEOUT",AIFrozenTimeout:5e3});;){const{delta:e}=yield P.take("TICK"),{game:{AIFrozenTimeout:t}}=yield P.select();if(0===t)break;const a=t-e;yield P.put({type:"SET_AI_FROZEN_TIMEOUT",AIFrozenTimeout:0>=a?0:a})}}function*d(e){const{tanks:t,players:a}=yield P.select(),n=t.filter((e)=>e.active&&"ai"===e.side);yield*f.destroyTanks(n),yield*n.map((t)=>P.put({type:"KILL",sourcePlayer:e.player,sourceTank:e.tank,targetPlayer:a.find((e)=>e.activeTankId===t.tankId),targetTank:t})).values()}function*i({tank:e}){yield P.put({type:"UPGRADE_TANK",tankId:e.tankId})}function*o({player:e}){yield P.put({type:"INCREMENT_PLAYER_LIFE",playerName:e.playerName})}function*s({tank:e}){yield P.put({type:"SET_HELMET_DURATION",tankId:e.tankId,duration:w.frame(630)})}function*p(){for(;;){const{delta:e}=yield P.take("TICK"),{tanks:t}=yield P.select();yield*t.filter((e)=>e.active&&0<e.helmetDuration).map((t)=>P.put({type:"SET_HELMET_DURATION",tankId:t.tankId,duration:t.helmetDuration-e})).values()}}function*u(e){const{powerUp:{x:t,y:a}}=e,n=w.getNextId("score");yield P.put({type:"ADD_SCORE",score:E.ScoreRecord({scoreId:n,score:500,x:t,y:a})}),yield f.nonPauseDelay(w.frame(48)),yield P.put({type:"REMOVE_SCORE",scoreId:n})}var b=Math.floor;Object.defineProperty(t,"__esModule",{value:!0});const P=a(10),E=a(9),c=a(2),w=a(5),f=a(20),y=(e)=>(t)=>"PICK_POWER_UP"===t.type&&t.powerUp.powerUpName===e;t.default=function*(){yield P.takeEvery("PICK_POWER_UP",u),yield P.takeLatest(y("shovel"),r),yield P.takeLatest(y("timer"),W),yield P.takeEvery(y("grenade"),d),yield P.takeEvery(y("star"),i),yield P.takeEvery(y("tank"),o),yield P.takeEvery(y("helmet"),s),yield P.fork(p)}},352:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=a(0),l=a(11),r=a(2),W=a(353),d=a(92),i=a(93),o=a(94),s=a(360),p=a(361),u=a(364),b=()=>n.createElement("div",{style:{maxWidth:200,marginLeft:20}},n.createElement("p",null,"\u5F53\u524D\u7248\u672C ","0.1.4"),n.createElement("p",null,"\u7F16\u8BD1\u65F6\u95F4 ","2017-09-10 19:58:25"),n.createElement("p",null,"\u6E38\u620F\u4ECD\u5728\u5F00\u53D1\u4E2D\uFF0C\u76EE\u524D\u53EA\u652F\u6301\u5355\u4EBA\u8FDB\u884C\u6E38\u620F\u3002 \u76EE\u524D\u6E38\u620F\u4ECD\u6709\u5F88\u591ABUG\uFF0C\u8BF7\u89C1\u8C05\u3002 \u8BF7\u4F7F\u7528\u6700\u65B0\u7684chrome\u6D4F\u89C8\u5668\u3002 \u6E38\u620F\u5F00\u59CB\u9875\u9762\u8BF7\u4F7F\u7528\u9F20\u6807\u8FDB\u884C\u64CD\u4F5C\u3002 \u6574\u4E2A\u6E38\u620F\u90FD\u4F7F\u7528\u4E86\u77E2\u91CF\u56FE\uFF0C\u53EF\u4EE5\u9002\u5F53\u653E\u5927\u6D4F\u89C8\u5668\u7684\u7F29\u653E\u6BD4\u4F8B\u3002"),n.createElement("p",null,"WASD \u63A7\u5236\u5766\u514B\u65B9\u5411"),n.createElement("p",null,"J \u63A7\u5236\u5F00\u706B"),n.createElement("p",null,"\u4F7F\u7528",n.createElement("a",{href:"./editor.html",target:"_blank"},"\u7F16\u8F91\u5668"),"\u521B\u5EFA\u81EA\u5DF1\u559C\u6B22\u7684\u5730\u56FE"),n.createElement("p",null,"\u5728",n.createElement("a",{href:"./stories.html",target:"_blank"},"stories\u9875\u9762"),"\u6D4F\u89C8\u6E38\u620F\u4E2D\u7684\u7EC4\u4EF6/\u7D20\u6750"),n.createElement("p",null,"STAR ME ON ",n.createElement("a",{href:"https://github.com/shinima/battle-city"},"GitHub"))),P=2,E=16*r.BLOCK_SIZE,c=15*r.BLOCK_SIZE;class w extends n.PureComponent{render(){const{scene:e,paused:t}=this.props;return n.createElement("div",{style:{display:"flex"}},n.createElement("svg",{className:"svg",style:{background:"#757575"},width:E*P,height:c*P,viewBox:`0 0 ${E} ${c}`},"game-title"===e?n.createElement(o.default,null):null,"game"===e?n.createElement(W.default,null):null,"gameover"===e?n.createElement(d.default,null):null,"statistics"===e?n.createElement(i.default,null):null,n.createElement(p.default,null),t?n.createElement(s.default,null):null),null,n.createElement(b,null))}}t.default=l.connect(function(e){return{scene:e.game.scene,paused:e.game.paused}})(w)},353:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=a(0),l=a(11),r=a(17),W=a(2),d=a(24),i=a(77),o=a(80),s=a(81),p=a(82),u=a(83),b=a(85),P=a(86),E=a(87),c=a(88),w=a(89),f=a(357),y=a(358),m=a(90),g=a(91);class h extends n.Component{render(){const{bullets:e,map:t,explosions:a,flickers:l,tanks:r,texts:h,powerUps:I,scores:_}=this.props,{bricks:R,steels:x,rivers:k,snows:S,forests:T,eagle:C}=t.toObject(),v=r.filter((e)=>e.active);return n.createElement("g",{role:"game-scene"},n.createElement(i.default,null),n.createElement("g",{role:"battle-field",transform:`translate(${W.BLOCK_SIZE},${W.BLOCK_SIZE})`},n.createElement("rect",{width:13*W.BLOCK_SIZE,height:13*W.BLOCK_SIZE,fill:"#000000"}),n.createElement(u.default,{rivers:k}),n.createElement(p.default,{steels:x}),n.createElement(s.default,{bricks:R}),n.createElement(b.default,{snows:S}),C?n.createElement(E.default,{x:C.x,y:C.y,broken:C.broken}):null,n.createElement("g",{role:"bullet-layer"},e.map((e,t)=>n.createElement(o.default,{key:t,direction:e.direction,x:e.x,y:e.y})).toArray()),n.createElement("g",{role:"tank-layer"},v.map((e)=>n.createElement(d.Tank,{key:e.tankId,tank:e})).toArray()),n.createElement("g",{role:"helmet-layer"},v.map((e)=>0<e.helmetDuration?n.createElement(f.default,{key:e.tankId,x:e.x,y:e.y}):null).toArray()),n.createElement(P.default,{forests:T}),n.createElement("g",{role:"power-up-layer"},I.map((e)=>n.createElement(m.default,{key:e.powerUpId,powerUp:e})).toArray()),n.createElement("g",{role:"explosion-layer"},a.map((e)=>n.createElement(c.default,{key:e.explosionId,explosion:e})).toArray()),n.createElement("g",{role:"flicker-layer"},l.map((e)=>n.createElement(w.default,{key:e.flickerId,flicker:e})).toArray()),n.createElement("g",{role:"score-layer"},_.map((e)=>n.createElement(g.default,{key:e.scoreId,score:e.score,x:e.x,y:e.y})).toArray())),n.createElement(y.default,{texts:h}))}}t.default=l.connect(r.identity)(h)},357:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=a(0),l=a(5),r=a(84);class W extends n.PureComponent{render(){const{x:e,y:t,tickIndex:a}=this.props,l=["M0,8 v-2 h1 v-1 h1 v-1 h2 v-2 h1 v-1 h1 v-1 h2 v1 h-2 v1 h-1 v2 h-1 v1 h-2 v1 h-1 v2 h-1","M0,2 h1 v-1 h1 v-1 h2 v1 h1 v1 h2 v1 h1 v1 h-1 v-1 h-2 v-1 h-1 v-1 h-2 v1 h-1 v2 h1 v1 h1 v2 h1 v1 h-1 v-1 h-1 v-2 h-1 v-1 h-1 v-2"];return n.createElement("g",{role:"tank-helmet",transform:`translate(${e}, ${t})`,fill:"white"},n.createElement("path",{d:l[a]}),n.createElement("path",{transform:"translate(16,0)rotate(90)",d:l[a]}),n.createElement("path",{transform:"translate(16, 16)rotate(180)",d:l[a]}),n.createElement("path",{transform:"translate(0, 16)rotate(270)",d:l[a]}))}}t.default=r.default(l.frame(2),l.frame(2))(W)},358:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=a(0),l=a(12);class r extends n.PureComponent{render(){const{texts:e}=this.props;return n.createElement("g",{role:"text-layer"},e.map((e)=>n.createElement(l.default,{key:e.textId,content:e.content,fill:e.fill,x:e.x,y:e.y})).toArray())}}t.default=r},360:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=a(0),l=a(12),r=a(2);class W extends n.PureComponent{constructor(){super(...arguments),this.handle=null,this.state={visible:!0}}componentDidMount(){this.handle=setInterval(()=>this.setState({visible:!this.state.visible}),250)}componentWillUnmount(){clearInterval(this.handle)}render(){return n.createElement("g",{role:"pause-indicator"},n.createElement(l.default,{content:"pause",x:6.25*r.BLOCK_SIZE,y:8*r.BLOCK_SIZE,fill:"#db2b00",style:{visibility:this.state.visible?"visible":"hidden"}}))}}t.default=W},361:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=a(0),l=a(11),r=a(362);class W extends n.PureComponent{render(){const{stageEnterCurtainT:e}=this.props;return n.createElement(r.default,{stageName:"stage  1",t:e})}}t.default=l.connect(function(e){return{stageEnterCurtainT:e.game.stageEnterCurtainT}})(W)},362:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=a(0),l=a(2),r=a(363),W=a(12);class d extends n.PureComponent{render(){const{t:e,stageName:a}=this.props;return n.createElement(r.default,{name:"stage-enter/exit",t:e,x:l.BLOCK_SIZE,y:l.BLOCK_SIZE,width:13*l.BLOCK_SIZE,height:13*l.BLOCK_SIZE},n.createElement("rect",{width:13*l.BLOCK_SIZE,height:13*l.BLOCK_SIZE,fill:"#757575"}),n.createElement(W.default,{content:a,x:5*l.BLOCK_SIZE,y:6*l.BLOCK_SIZE,fill:"black"}))}}t.default=d},363:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=a(0);class l extends n.PureComponent{render(){const{name:e,children:a,t:l,x:W=0,y:d=0,width:t,height:r}=this.props;return n.createElement("g",{role:`curtain-${e}`,transform:`translate(${W}, ${d})`},n.createElement("defs",null,n.createElement("clipPath",{id:"default-curtain"},n.createElement("rect",{x:0,y:0,width:t,height:r/2*l}),n.createElement("rect",{x:0,y:r*(1-l/2),width:t,height:r/2*l}))),n.createElement("g",{clipPath:"url(#default-curtain)"},a))}}t.default=l},364:function(e,t,a){"use strict";function n(e){return e.update("x",Math.round).update("y",Math.round).update("cooldown",Math.round).update("helmetDuration",Math.round)}Object.defineProperty(t,"__esModule",{value:!0});const l=a(0),r=a(11),W=a(17);class d extends l.PureComponent{constructor(){super(...arguments),this.state={view:"scores",allScores:this.props.scores,allTanks:this.props.tanks.map(n),allPlayers:this.props.players,allExplosions:this.props.explosions},this.debugger=()=>{console.log("state =",this.state),console.log("props =",this.props),function(e){e.state=this.state,e.props=this.props}.call(this,window);debugger}}componentWillReceiveProps(){const{scores:e,tanks:t,players:a,explosions:l}=this.props,{allScores:r,allTanks:W,allPlayers:d,allExplosions:i}=this.state;this.setState({allScores:r.merge(e),allTanks:W.merge(t.map(n)),allPlayers:d.merge(a),allExplosions:i.merge(l)})}renderPlayersView(){const{players:e}=this.props,{allPlayers:t}=this.state;return l.createElement("div",{role:"players-view"},t.isEmpty()?l.createElement("p",null," EMPTY PLAYERS "):null,t.map((t)=>l.createElement("pre",{key:t.playerName,style:{textDecoration:e.has(t.playerName)?"none":"line-through"}},JSON.stringify(t,null,2))).toArray())}renderExplosionsView(){const{explosions:e}=this.props,{allExplosions:t}=this.state;return l.createElement("div",{role:"explosions-view"},t.isEmpty()?l.createElement("p",null,"EMPTY EXPLOSIONS"):null,t.map((t)=>l.createElement("pre",{key:t.explosionId,style:{textDecoration:e.has(t.explosionId)?"none":"line-through"}},JSON.stringify(t,null,2))).toArray())}renderTanksView(){const{tanks:e}=this.props,{allTanks:t}=this.state;return l.createElement("div",{role:"tanks-view"},t.isEmpty()?l.createElement("p",null,"EMPTY TANKS"):null,t.map((a)=>l.createElement("pre",{key:a.tankId,style:{textDecoration:e.has(a.tankId)?"none":"line-through"}},JSON.stringify(a,null,2))).toArray())}renderScoresView(){const{scores:e}=this.props,{allScores:t}=this.state;return l.createElement("div",null,t.isEmpty()?l.createElement("p",null,"EMPTY"):null,t.map((t)=>l.createElement("pre",{key:t.scoreId,style:{textDecoration:e.has(t.scoreId)?"none":"line-through"}},JSON.stringify(t,null,2))).toArray())}render(){const{view:e}=this.state;return l.createElement("div",{style:{maxHeight:"100vh",overflow:"auto",fontSize:"12px",border:"1px solid red"}},l.createElement("div",{style:{display:"flex"}},l.createElement("button",{style:{color:"scores"===e?"green":"inherit"},onClick:()=>this.setState({view:"scores"})},"Score"),l.createElement("button",{style:{color:"tanks"===e?"green":"inherit"},onClick:()=>this.setState({view:"tanks"})},"Tanks"),l.createElement("button",{style:{color:"players"===e?"green":"inherit"},onClick:()=>this.setState({view:"players"})},"Players"),l.createElement("button",{style:{color:"explosions"===e?"green":"inherit"},onClick:()=>this.setState({view:"explosions"})},"Explosions"),l.createElement("button",{onClick:this.debugger},"debugger")),"scores"===e?this.renderScoresView():null,"tanks"===e?this.renderTanksView():null,"players"===e?this.renderPlayersView():null,"explosions"===e?this.renderExplosionsView():null)}}t.default=r.connect(W.identity)(d)},77:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=a(0),l=a(11),r=a(78),W=a(79),d=a(12),i=a(2);class o extends n.PureComponent{renderPlayer1Info(){const{players:e}=this.props,t=e.find((e)=>"player-1"===e.playerName);if(null==t)return null;const a=`translate(${14.5*i.BLOCK_SIZE},${7.5*i.BLOCK_SIZE})`;return n.createElement("g",{role:"player-1-info",transform:a},n.createElement(d.default,{x:0,y:0,content:"\u2160P",fill:"#000000"}),n.createElement(W.PlayerTankThumbnail,{x:0,y:0.5*i.BLOCK_SIZE}),n.createElement(d.default,{x:0.5*i.BLOCK_SIZE,y:0.5*i.BLOCK_SIZE,content:t.lives+"",fill:"#000000"}))}renderPlayer2Info(){const{players:e}=this.props,t=e.find((e)=>"player-2"===e.playerName);if(null==t)return null;const a=`translate(${14.5*i.BLOCK_SIZE},${8.5*i.BLOCK_SIZE})`;return n.createElement("g",{role:"player-2-info",transform:a},n.createElement(d.default,{x:0,y:0,content:"\u2161P",fill:"#000000"}),n.createElement(W.PlayerTankThumbnail,{x:0,y:0.5*i.BLOCK_SIZE}),n.createElement(d.default,{x:0.5*i.BLOCK_SIZE,y:0.5*i.BLOCK_SIZE,content:t.lives+"",fill:"#000000"}))}render(){const{remainingEnemyCount:e,show:t}=this.props;return n.createElement("g",{role:"HUD",display:t?"inline":"none"},n.createElement(r.default,{count:e}),this.renderPlayer1Info(),this.renderPlayer2Info())}}t.default=l.connect(function(e){return{remainingEnemyCount:e.game.remainingEnemies.size,players:e.players,show:e.game.showHUD}})(o)},78:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=a(0),l=a(17),r=a(2),W=({x:e,y:t})=>n.createElement("g",{transform:`translate(${e},${t})`,fill:"#00000"},n.createElement("rect",{x:1,y:1,width:1,height:6}),n.createElement("rect",{x:7,y:1,width:1,height:6}),n.createElement("rect",{x:2,y:3,width:5,height:2}),n.createElement("rect",{x:3,y:2,width:3,height:4}),n.createElement("rect",{x:4,y:1,width:1,height:6}),n.createElement("rect",{x:3,y:7,width:3,height:1}),n.createElement("rect",{x:4,y:3,width:1,height:2,fill:"#6B0800"})),d=`translate(${1.5*r.BLOCK_SIZE+r.FIELD_SIZE}, ${1.5*r.BLOCK_SIZE})`;class i extends n.PureComponent{render(){const{count:e}=this.props;return n.createElement("g",{role:"remaining-enemy-count-indicator",transform:d},l.range(e).map((e)=>n.createElement(W,{key:e,x:8*(e%2),y:8*Math.floor(e/2)})))}}t.default=i},79:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=a(0);class l extends n.PureComponent{render(){const{x:e,y:t}=this.props;return n.createElement("path",{role:"player-tank-thumbnail",transform:`translate(${e},${t})`,fill:"#9c4a00",d:"M1,1 h1 v2 h1 v-1 h1 v-1 h-1 v-1 h3 v1 h-1 v1 h1 v1 h1 v-2 h1 v7 h-1 v-2 h-1 v-2 h-1 v-1 h-1 v1 h-1 v1 h1 v1 h1 v-1 h1 v2 h-1 v1 h-1 v-1 h-1 v-1 h-1 v2 h-1 v-7"})}}t.PlayerTankThumbnail=l},80:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=a(0),l=a(18),r="#ADADAD";t.default=({x:e,y:t,direction:a})=>{let W=null;if("up"===a)W=n.createElement(l.Pixel,{x:1,y:-1,fill:r});else if("down"===a)W=n.createElement(l.Pixel,{x:1,y:3,fill:r});else if("left"===a)W=n.createElement(l.Pixel,{x:-1,y:1,fill:r});else if("right"===a)W=n.createElement(l.Pixel,{x:3,y:1,fill:r});else throw new Error(`Invalid direction ${a}`);return n.createElement("g",{role:"bullet",transform:`translate(${e},${t})`},W,n.createElement("rect",{width:3,height:3,fill:r}))}},88:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=a(0),l=a(18),r={" ":"none",W:"#fffffe",P:"#590d79",R:"#b53121"},W={s0:["                ","                ","       W     W  ","   W   W  W W   ","   PWW PW WWP   ","    PPWWPPWP    ","     PWRWRWPWW  ","   WWWPWR RPP   ","     PW RRWP    ","     WWRWPRWP   ","    WP WPWWPWP  ","   WP PW PW  W  ","      W   P     ","                ","                "],s1:["                ","      P   W     "," W  P WP WP   W "," PWW  PW WP WWP ","  PPWPPWWWPWPP  ","   PWRWWWPRWW P "," P  PWR RWWPP   ","   WWWWRRR PWWW ","WW WPW RR WWPP  ","  PPWWPRRRWPP P ","    WRWP PWRW   ","  P PWRWWWRPWW  ","   PWPWPPWW PPW ","   WPPWP PW   P ","  WP  W P PP    ","                "],s2:["    P P    P  P "," W   W  W P  WP "," PPWW  WW   WP  ","  PPWPPWPP WWP  ","   PRWWWWPWWPP P"," W PWWRW WWRP   ","WWWW WR  RWWWWWW"," PPPWWPR RWPPP  ","   PPP WR PPWW  "," WPPWWPW WRWPPW ","  WWWRWPWPWW    "," PWPPWPWWPPWW P "," WP  P PWP PPW  ","WP  P   W    PW ","        W P   P "],b0:["                                ","                     W       W  ","  W       W          W       W  ","   W  W  W   PPP WWP  W     W   ","    P  W   WWWPPPWWPP W W  P    ","     W P  WPWWW W  WPPW W WW    ","      W   WWPW WPPP WWWW W      ","    WW   WWWWWWWWWPWWWWWW W     ","       PPPW  WWWPWWPWW PW    PW ","      WPPPWWWWWPWW WW WWPW   W  ","P    WW WPWWWRWWRWWWPWWWPWWW    "," WP PW WWWRRWWWWRPWWWPWPW WPW   ","  W WW WWWWRRWRWRWWRRPWW WPPW   "," W   WW WPWRWRRRRRRWRWWWW WW    ","  W WPWWPPWWRWRWWRWRPWWWWW WW   ","    PP PWPWWRRWP WRWWWW W WPP   ","      WWPWRRRW WPW RW PWWW PP   ","     WWWWWWWRRWRPRRRWPPPWWWP  W ","     WW WWWWRWRRPRWWRWW WWPP   W","    PW WWPWRWWWRWRPWWWWWPPPP    ","    PPWPPPWWWWPRRWWWWPWWW P W   ","  W  PPPPWWWWPPWRWWWWWPWW WW    ","   W    PW WPPWWWW WW PW WP     ","        WW WWW WWWW  PPWWPP     ","      WP WW W PPWWWWPPWW P      ","     P W WWWWWPP  PPP W W WW    ","    W      PPPP         W  P    ","   W     W        W  W     WP   ","  P        W       PWP      WP  ","  W                W W       W  ","                                ","                                "],b1:["W                               ","PW   W             PPWW       W "," PW   P     WPPP PWWWWPP    WP  ","  PP    WW WWWP PWWW  WPP  WP   ","   PP  WPWWWRWWW WW WP WPP  P   ","   P  WWPPRPWWWWWWWWWWP WP      ","      WPWWWWPWWWWWWPPWW WP WW   ","    PPWWWWWWWWWPPWWWWPWWWPPWWP  ","    PWWWW WPPWWWWPWWWWWWPPWWPPP ","     WW  WWWWWRWWWWRWWWWPWW WPP ","   WWW WWWRWWWRRWWRRWRWPWWWW WP ","  PWWWWWWWRRRWRWRRRWRWWWWPWW WPW","  WPWW WWWR RRWPRRWRWWWWWPW WPPP","   PW PWWWWRWWR RWRWWWRWPW WPPW ","   PP PWWWWRRRRWPRRRWRWWWWWWP   "," W WWW PWRRRRRWWW WRWWWWWWPPWW  "," WWWWWWWWWWRRP WWRRRRWWWWPWWWPP ","WWWRPWWWWRWRWWRPWWR WRRRWWWWWWP ","WWWWPWWWRWWRRRR RRWRWWWWWWW WWPW","PWWPWRWWWWRRWRRWRRRRWWWWWPWW WWP","PPPPWWPPWRRPPWRRRWWRRWWPPWWWW W "," PP WWWWWWWWWWRWWWWWWRWWWPWW WPW","     WWWWWWWPWWWWWWPWWWWWWWWW WP","    WW WW WWWWWWW PP WWWWWWWPWPW","    WWW  PPWWWPWWW  WWWP WW  PWW","    WWWWWWPPWWW WWWWPWWPP  WPPW ","    PWWWWP WWWW WWWPPPWWPPPPPW  ","  W  PWPP  PPPWW PPP WRWWPPW    ","   W  PP      WWW   WWWPP    W  ","  P P     WP   WWWWWWWPPW  P P  "," W  P       W   WWPPWPPP    P W ","W          W     PPP P         P"]};class d extends n.PureComponent{render(){const{explosion:{cx:e,cy:t,shape:a,explosionId:d}}=this.props,i="s0"===a||"s1"===a||"s2"===a;return n.createElement(l.Bitmap,{x:e-(i?8:16),y:t-(i?8:16),d:W[a],scheme:r})}}t.default=d},89:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=a(0);class l extends n.PureComponent{render(){const{flicker:{x:e,y:t,shape:a}}=this.props,l=`translate(${e},${t})`;if(0===a)return n.createElement("g",{transform:l,fill:"#ffffff"},n.createElement("rect",{x:3,y:7,width:9,height:1}),n.createElement("rect",{x:6,y:6,width:3,height:3}),n.createElement("rect",{x:7,y:3,width:1,height:9}));if(1===a)return n.createElement("g",{transform:l,fill:"#ffffff"},n.createElement("rect",{x:2,y:7,width:11,height:1}),n.createElement("rect",{x:5,y:6,width:5,height:3}),n.createElement("rect",{x:6,y:5,width:3,height:5}),n.createElement("rect",{x:7,y:2,width:1,height:11}));if(2===a)return n.createElement("g",{transform:l,fill:"#ffffff"},n.createElement("rect",{x:1,y:7,width:13,height:1}),n.createElement("rect",{x:4,y:6,width:7,height:3}),n.createElement("rect",{x:6,y:4,width:3,height:7}),n.createElement("rect",{x:7,y:1,width:1,height:13}));if(3===a)return n.createElement("g",{transform:l,fill:"#ffffff"},n.createElement("rect",{x:0,y:7,width:15,height:1}),n.createElement("rect",{x:3,y:6,width:9,height:3}),n.createElement("rect",{x:5,y:5,width:5,height:5}),n.createElement("rect",{x:6,y:3,width:3,height:9}),n.createElement("rect",{x:7,y:0,width:1,height:15}));throw new Error(`Invalid tickIndex: ${a}`)}}t.default=l},90:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=a(0),l=a(18),r={" ":"none",w:"#FFFFFF",g:"#ADADAD",b:"#00424A"},W={tank:[" wwwwwwwwwwwwwg ","w             wb","w bbbbbbbbbbbbwb","w bbbbbwgg bbbwb","w bwwwwgggb bbwb","w b    gggb bbwb","w bbbwggbbgb bwb","w bbwgggggbb bwb","w bgbg      g wb","w bggwwwwgggb wb","w b w w w wbg wb","w bb ggggggg bwb","w bbb       bbwb","gwwwwwwwwwwwwwwg"," bbbbbbbbbbbbbb ","                "],star:[" wwwwwwwwwwwwwg ","w             wb","w bbbbbw bbbbbwb","w bbbbwwg bbbbwb","w bbbbwwg bbbbwb","w wwwwwggwwww wb","w bgggwgwggg  wb","w bbgwwwwgg  wwb","w bbwwggwwg bbwb","w bgwgg ggwg bwb","w bwgg   ggw bwb","w bg   bb  g bwb","w b  bbbbbb  bwb","gwwwwwwwwwwwwwgb"," bbbbbbbbbbbbbb ","                "],grenade:[" wwwwwwwwwwwwwg ","w             wb","w bbbwwwgg bbbwb","w bbbwgb  g bbwb","w bbwgggb  g bwb","w bwgbwgbg g bwb","w bg g  g  g bwb","w bwgbwgbg g bwb","w bg g  g  g bwb","w bwgbwgbg g bwb","w bbgb  g bbbbwb","w bbbwgg bbbbbwb","w bbb   bbbbbbwb","gwwwwwwwwwwwwwgb"," bbbbbbbbbbbbbb ","                "],timer:[" wwwwwwwwwwwwwg ","w             wb","w bbbbwgwg bbbwb","w bbbbg   wg bwb","w bbbgggg    bwb","w bbgwwwwg bbbwb","w bgwwbwwwg bbwb","w bgwwbwwwg bbwb","w bgwwwbwwg bbwb","w b gwwwwg bbbwb","w bb gggg bbbbwb","w bbb    bbbbbwb","w bbbbbbbbbbbbwb","gwwwwwwwwwwwwwgb"," bbbbbbbbbbbbbb ","                "],helmet:[" wwwwwwwwwwwwwg ","w             wb","w bbbbbbbbbbbbwb","w bbbbbbbbbbbbwb","w bbbwwwgg bbbwb","w bbwwggggg bbwb","w bbwgggggg bbwb","w bbggggggg bbwb","w bgggggggg bbwb","w b     gggg bwb","w bbbbbb     bwb","w bbbbbbbbbbbbwb","w bbbbbbbbbbbbwb","gwwwwwwwwwwwwwgb"," bbbbbbbbbbbbbb ","                "],shovel:[" wwwwwwwwwwwwwg ","w             wb","w bbbbbbbbwbbbwb","w bbbbbbbbwgbbwb","w bbbbbbbbgggbwb","w bbbbbbbw   bwb","w bbbwbbw bbbbwb","w bbwwgw bbbbbwb","w bwwgbw bbbbbwb","w bwgbggg bbbbwb","w bggggg bbbbbwb","w bgggg bbbbbbwb","w b    bbbbbbbwb","gwwwwwwwwwwwwwgb"," bbbbbbbbbbbbbb ","                "]};class d extends n.PureComponent{render(){const{powerUp:{visible:e,x:t,y:a,powerUpName:d}}=this.props;return n.createElement(l.Bitmap,{style:{visibility:e?"visible":"hidden"},x:t,y:a,d:W[d],scheme:r})}}t.default=d},91:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=a(0),l=({x:e,y:t})=>n.createElement("g",{role:"zero",transform:`translate(${e}, ${t})`},n.createElement("rect",{x:"1",y:"0",width:"2",height:"1"}),n.createElement("rect",{x:"1",y:"6",width:"2",height:"1"}),n.createElement("rect",{x:"0",y:"1",width:"1",height:"5"}),n.createElement("rect",{x:"3",y:"1",width:"1",height:"5"})),r=({x:e,y:t})=>n.createElement("g",{role:"one",transform:`translate(${e}, ${t})`},n.createElement("rect",{x:"1",y:"1",width:"1",height:"1"}),n.createElement("rect",{x:"1",y:"6",width:"3",height:"1"}),n.createElement("rect",{x:"2",y:"0",width:"1",height:"7"})),W=({x:e,y:t})=>n.createElement("g",{role:"two",transform:`translate(${e}, ${t})`},n.createElement("rect",{x:"0",y:"1",width:"1",height:"1"}),n.createElement("rect",{x:"1",y:"0",width:"2",height:"1"}),n.createElement("rect",{x:"3",y:"1",width:"1",height:"2"}),n.createElement("rect",{x:"2",y:"3",width:"1",height:"1"}),n.createElement("rect",{x:"1",y:"4",width:"1",height:"1"}),n.createElement("rect",{x:"0",y:"5",width:"1",height:"1"}),n.createElement("rect",{x:"0",y:"6",width:"4",height:"1"})),d=({x:e,y:t})=>n.createElement("path",{role:"three",d:`M${e},${t+1} h1 v-1 h2 v1 h1 v2 h-1 v1 h1 v2 h-1 v1 h-2 v-1 h-1 v-1 h1 v1 h2 v-2 h-2 v-1 h2 v-2 h-2 v1 h-1 v-1`}),i=({x:e,y:t})=>n.createElement("path",{role:"four",d:`M${e+1},${t+2} v-1 h1 v-1 h1 v4 h-1 v-2 h-1 v2 h3 v1 h-1 v2 h-1 v-2 h-2 v-3 h1`}),o=({x:e,y:t})=>n.createElement("path",{role:"five",d:`M${e},${t} h4 v1 h-3 v1 h2 v1 h1 v3 h-1 v1 h-2 v-1 h-1 v-1 h1 v1 h2 v-3 h-3 v-3`});class s extends n.PureComponent{render(){const{score:e,x:t=0,y:a=0}=this.props;let s;if(100===e)s=r;else if(200===e)s=W;else if(300===e)s=d;else if(400===e)s=i;else if(500===e)s=o;else throw new Error(`Invalid score: ${e}`);return n.createElement("g",{transform:`translate(${t},${a})`,fill:"white"},n.createElement(s,{x:1,y:4}),n.createElement(l,{x:6,y:4}),n.createElement(l,{x:11,y:4}))}}t.default=s},92:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=a(0),l=a(2),r=a(34),W=a(12);class d extends n.PureComponent{render(){const e=l.ITEM_SIZE_MAP.BRICK,t=4;return n.createElement("g",{role:"gameover-scene"},n.createElement("defs",null,n.createElement("pattern",{id:"pattern-brickwall",width:2*e/t,height:2*e/t,patternUnits:"userSpaceOnUse"},n.createElement("g",{transform:`scale(${1/t})`},n.createElement(r.default,{x:0,y:0}),n.createElement(r.default,{x:0,y:e}),n.createElement(r.default,{x:e,y:0}),n.createElement(r.default,{x:e,y:e})))),n.createElement("rect",{fill:"#000000",x:0,y:0,width:16*l.BLOCK_SIZE,height:15*l.BLOCK_SIZE}),n.createElement("g",{transform:`scale(${t})`},n.createElement(W.default,{content:"game",x:4*l.BLOCK_SIZE/t,y:4*l.BLOCK_SIZE/t,fill:"url(#pattern-brickwall)"}),n.createElement(W.default,{content:"over",x:4*l.BLOCK_SIZE/t,y:7*l.BLOCK_SIZE/t,fill:"url(#pattern-brickwall)"})))}}t.default=d},93:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=a(0),l=a(11),r=a(12),W=a(24),d=a(2),i=a(9);class o extends n.PureComponent{render(){const{transientKillInfo:e,stageName:t,showTotalKillCount:a}=this.props,l=e.get("player-1"),o=l.get("basic"),s=-1===o?"  ":(o+"").padStart(2),p=-1===o?"    ":(100*o+"").padStart(4),u=l.get("fast"),b=-1===u?"  ":(u+"").padStart(2),P=-1===u?"    ":(200*u+"").padStart(4),E=l.get("power"),c=-1===E?"  ":(E+"").padStart(2),w=-1===E?"    ":(300*E+"").padStart(4),f=l.get("armor"),y=-1===f?"  ":(f+"").padStart(2),m=-1===f?"    ":(400*f+"").padStart(4);let g="  ";if(a){const e=(-1===o?0:o)+(-1===u?0:u)+(-1===E?0:E)+(-1===f?0:f);g=(e+"").padStart(2)}return n.createElement("g",{role:"statistics-scene"},n.createElement("rect",{fill:"#000000",x:0,y:0,width:16*d.BLOCK_SIZE,height:16*d.BLOCK_SIZE}),n.createElement("g",{transform:`translate(${-0.5*d.BLOCK_SIZE}, ${-1.5*d.BLOCK_SIZE})`},n.createElement(r.default,{content:"HI-SCORE",x:4.5*d.BLOCK_SIZE,y:3.5*d.BLOCK_SIZE,fill:"#e44437"}),n.createElement(r.default,{content:"20000",x:10*d.BLOCK_SIZE,y:3.5*d.BLOCK_SIZE,fill:"#feac4e"}),n.createElement(r.default,{content:`STAGE  ${t}`,x:6.5*d.BLOCK_SIZE,y:4.5*d.BLOCK_SIZE,fill:"#ffffff"}),n.createElement(W.Tank,{tank:i.TankRecord({x:8*d.BLOCK_SIZE,y:7.7*d.BLOCK_SIZE,side:"ai",level:"basic"})}),n.createElement(W.Tank,{tank:i.TankRecord({x:8*d.BLOCK_SIZE,y:9.2*d.BLOCK_SIZE,side:"ai",level:"fast"})}),n.createElement(W.Tank,{tank:i.TankRecord({x:8*d.BLOCK_SIZE,y:10.7*d.BLOCK_SIZE,side:"ai",level:"power"})}),n.createElement(W.Tank,{tank:i.TankRecord({x:8*d.BLOCK_SIZE,y:12.2*d.BLOCK_SIZE,side:"ai",level:"armor"})}),n.createElement("rect",{x:6.5*d.BLOCK_SIZE,y:13.3*d.BLOCK_SIZE,width:4*d.BLOCK_SIZE,height:2,fill:"white"}),n.createElement(r.default,{content:"\u2160-PLAYER",x:2*d.BLOCK_SIZE,y:5.5*d.BLOCK_SIZE,fill:"#e44437"}),n.createElement(r.default,{content:"3200",x:4*d.BLOCK_SIZE,y:6.5*d.BLOCK_SIZE,fill:"#feac4e"}),n.createElement(r.default,{content:`${p} PTS ${s}\u2190`,x:2*d.BLOCK_SIZE,y:8*d.BLOCK_SIZE,fill:"white"}),n.createElement(r.default,{content:`${P} PTS ${b}\u2190`,x:2*d.BLOCK_SIZE,y:9.5*d.BLOCK_SIZE,fill:"white"}),n.createElement(r.default,{content:`${w} PTS ${c}\u2190`,x:2*d.BLOCK_SIZE,y:11*d.BLOCK_SIZE,fill:"white"}),n.createElement(r.default,{content:`${m} PTS ${y}\u2190`,x:2*d.BLOCK_SIZE,y:12.5*d.BLOCK_SIZE,fill:"white"}),n.createElement(r.default,{content:`TOTAL ${g}`,x:3.5*d.BLOCK_SIZE,y:13.5*d.BLOCK_SIZE,fill:"white"})))}}t.default=l.connect(function({game:{transientKillInfo:e,currentStage:t,showTotalKillCount:a}}){return{transientKillInfo:e,stageName:t,showTotalKillCount:a}})(o)},94:function(e,t,a){"use strict";function n(e){return"1-player"===e?8.25*s.BLOCK_SIZE:"2-players"===e?9.25*s.BLOCK_SIZE:10.25*s.BLOCK_SIZE}Object.defineProperty(t,"__esModule",{value:!0});const l=a(0),r=a(11),W=a(34),d=a(12),i=a(95),o=a(24),s=a(2),p=a(9);class u extends l.PureComponent{constructor(){super(...arguments),this.state={choice:"1-player"}}render(){const e=s.ITEM_SIZE_MAP.BRICK,t=4,{dispatch:a}=this.props,{choice:r}=this.state;return l.createElement("g",{role:"game-title-scene"},l.createElement("defs",null,l.createElement("pattern",{id:"pattern-brickwall",width:2*e/t,height:2*e/t,patternUnits:"userSpaceOnUse"},l.createElement("g",{transform:`scale(${1/t})`},l.createElement(W.default,{x:0,y:0}),l.createElement(W.default,{x:0,y:e}),l.createElement(W.default,{x:e,y:0}),l.createElement(W.default,{x:e,y:e})))),l.createElement("rect",{fill:"#000000",width:16*s.BLOCK_SIZE,height:15*s.BLOCK_SIZE}),l.createElement("g",{transform:"scale(0.5)"},l.createElement(i.default,{textFill:"#607d8b",x:22*s.BLOCK_SIZE,y:s.BLOCK_SIZE,content:"star me on github",onClick:()=>window.open("https://github.com/shinima/battle-city")})),l.createElement(d.default,{content:"\u2160-    00 HI- 20000",x:1*s.BLOCK_SIZE,y:1.5*s.BLOCK_SIZE}),l.createElement("g",{transform:`scale(${t})`},l.createElement(d.default,{content:"battle",x:1.5*s.BLOCK_SIZE/t,y:3*s.BLOCK_SIZE/t,fill:"url(#pattern-brickwall)"}),l.createElement(d.default,{content:"city",x:3.5*s.BLOCK_SIZE/t+1,y:5.5*s.BLOCK_SIZE/t,fill:"url(#pattern-brickwall)"})),l.createElement(i.default,{content:"1 player",x:5.5*s.BLOCK_SIZE,y:8.5*s.BLOCK_SIZE,textFill:"white",onMouseOver:()=>this.setState({choice:"1-player"}),onClick:()=>a({type:"GAMESTART"})}),l.createElement(i.default,{content:"2 players",x:5.5*s.BLOCK_SIZE,y:9.5*s.BLOCK_SIZE,textFill:"white",disabled:!0,onMouseOver:()=>this.setState({choice:"2-players"})}),l.createElement(i.default,{content:"editor",x:5.5*s.BLOCK_SIZE,y:10.5*s.BLOCK_SIZE,textFill:"white",onMouseOver:()=>this.setState({choice:"editor"})}),l.createElement(o.Tank,{tank:p.TankRecord({side:"human",direction:"right",color:"yellow",moving:!0,x:4*s.BLOCK_SIZE,y:n(r)})}),l.createElement(d.default,{content:"\xA9 1980 1985 NAMCO LTD.",x:2*s.BLOCK_SIZE,y:12.5*s.BLOCK_SIZE}),l.createElement(d.default,{content:"ALL RIGHTS RESERVED",x:3*s.BLOCK_SIZE,y:13.5*s.BLOCK_SIZE}))}}t.default=r.connect(void 0)(u)}},[156]);